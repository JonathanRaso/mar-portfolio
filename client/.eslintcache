[{"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\App.js":"1","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\index.js":"2","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home\\index.js":"3","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\infos\\index.js":"4","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\navbar\\index.js":"5","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\project\\index.js":"6","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home-card\\index.js":"7","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\admin\\admin-dashboard\\index.js":"8","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\context\\auth-context.js":"9","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\404\\index.js":"10","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\loading\\index.js":"11"},{"size":1268,"mtime":1612966084746,"results":"12","hashOfConfig":"13"},{"size":309,"mtime":1610717898127,"results":"14","hashOfConfig":"13"},{"size":1395,"mtime":1613136700970,"results":"15","hashOfConfig":"13"},{"size":3063,"mtime":1612967411686,"results":"16","hashOfConfig":"13"},{"size":627,"mtime":1612363650424,"results":"17","hashOfConfig":"13"},{"size":6544,"mtime":1613655429040,"results":"18","hashOfConfig":"13"},{"size":948,"mtime":1613138000392,"results":"19","hashOfConfig":"13"},{"size":6570,"mtime":1613138151983,"results":"20","hashOfConfig":"13"},{"size":90,"mtime":1611846263896,"results":"21","hashOfConfig":"13"},{"size":200,"mtime":1612536222678,"results":"22","hashOfConfig":"13"},{"size":158,"mtime":1612968293036,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1277rcr",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"35"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\App.js",[],["51","52"],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\index.js",[],["53","54"],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home\\index.js",[],["55","56"],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\infos\\index.js",[],["57","58"],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\navbar\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\project\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home-card\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\admin\\admin-dashboard\\index.js",["59","60","61","62"],"import { useState, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport { AuthContext } from '../../context/auth-context';\r\n\r\nimport LoadingSpinner from '../../shared/loading/index';\r\n\r\nimport '../../../App.css';\r\nimport './styles.css';\r\n\r\nconst AdminDashboard = () => {\r\n\r\n  // Getting login value (true or false) from context hook\r\n  const { login, setLogin } = useContext(AuthContext);\r\n\r\n  // Used for redirecting admin.\r\n  const history = useHistory();\r\n\r\n  // Display Loading Spinner if loading == true;\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Login form state\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  // Create form state\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [imageFile, setImageFile] = useState();\r\n\r\n  // Display file name before form submit\r\n  const [fileName, setFileName] = useState(\"\");\r\n\r\n  // Display error/success message\r\n  const [creationResult, setCreationResult] = useState(\"\");\r\n\r\n  const handleSubmitLoginForm = async (event) => {\r\n    // Prevent submit default behaviour and set loading to true\r\n    event.preventDefault();\r\n    setLoading(true); \r\n    \r\n    // Send username/password to backend and change login/loading state if request successful or not\r\n    try {\r\n      await axios.post(process.env.REACT_APP_BACKEND_URL + '/users/login', { username, password });\r\n      setLogin(true);\r\n      setLoading(false);\r\n      setCreationResult(\"\");\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setCreationResult(\"La connexion a échoué, veuillez recommencer.\");\r\n    }  \r\n  }\r\n\r\n  const handleFileChange = (event) => {\r\n    // set imageFile value and get file name to display on creation form\r\n    setImageFile(event.target.files[0]);\r\n    setFileName(event.target.value.match(/[\\/\\\\]([\\w\\d\\s\\.\\-\\(\\)]+)$/)[1]);\r\n  }\r\n\r\n  const handleSubmitCreateForm = async (event) => {\r\n\r\n    // Prevent submit default behaviour and set loading to true\r\n    event.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Add data sent by client to formData.\r\n      // Send post request with data.\r\n      // If successful, display message and redirect to homepage\r\n      const formData = new FormData();\r\n      formData.append('title', title);\r\n      formData.append('description', description);\r\n      formData.append('imageUrl', imageFile);\r\n      await axios.post(process.env.REACT_APP_BACKEND_URL + '/projects/add-project', formData );\r\n      setLoading(false);\r\n      setCreationResult(\"Création du projet réussie! Redirection en cours.\");\r\n\r\n      setTimeout(() => {\r\n        setCreationResult(\"\");\r\n        history.push('/');\r\n      }, 3000);\r\n\r\n    } catch (error) {\r\n      // If unsuccessful, display error message.\r\n      setLoading(false);\r\n      setCreationResult(\"La création du projet a échoué, veuillez recommencer.\");\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <main> \r\n      <div className=\"admin__container\">\r\n        {creationResult &&\r\n          <span className=\"dashboard__message\">{creationResult}</span>\r\n        }\r\n        {!login &&\r\n          <div className=\"dashboard__form\">\r\n            {!loading && \r\n              <form className=\"dashboard__login\" onSubmit={handleSubmitLoginForm} method=\"POST\">\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"username\">Nom d'utilisateur</label>\r\n              <input \r\n                className=\"dashboard__input\"\r\n                id=\"username\" \r\n                type=\"text\" \r\n                name=\"username\" \r\n                value={username} \r\n                onChange={(event) => {\r\n                  setUsername(event.target.value);\r\n                }} \r\n                required/>\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"password\">Mot de passe</label>\r\n              <input \r\n                className=\"dashboard__input\"\r\n                id=\"password\" \r\n                type=\"password\" \r\n                name=\"password\" \r\n                value={password} \r\n                onChange={(event) => {\r\n                  setPassword(event.target.value);\r\n                }} \r\n                required/>\r\n\r\n              <input className=\"dashboard__button\" type=\"submit\" value=\"Connexion\"/>\r\n            </form>\r\n            }  \r\n            {loading && \r\n              <LoadingSpinner />  \r\n            }\r\n          </div>\r\n        }\r\n        \r\n        {login && \r\n          <div className=\"dashboard__form\">  \r\n            {!loading && \r\n              <form className=\"dashboard__creation\" onSubmit={handleSubmitCreateForm} method=\"POST\" encType=\"multipart/form-data\">\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"title\">Titre du projet</label>\r\n              <input \r\n                className=\"dashboard__input\"\r\n                id=\"title\" \r\n                type=\"text\" \r\n                name=\"title\"\r\n                placeholder=\"3 caractères min\" \r\n                value={title} \r\n                onChange={(event) => {\r\n                  setTitle(event.target.value); console.log('title is : ' + title);\r\n                }}\r\n                required\r\n              />\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"description\">Description du projet</label>\r\n              <textarea\r\n                className=\"dashboard__textarea\" \r\n                id=\"description\" \r\n                name=\"description\"\r\n                placeholder=\"15 caractères min\" \r\n                value={description} \r\n                onChange={(event) => {\r\n                  setDescription(event.target.value); console.log('description is : ' + description);\r\n                }} \r\n                required\r\n              />\r\n\r\n              <label className=\"dashboard__label--file\" htmlFor=\"imageUrl\">Choisir une image</label>\r\n              <input\r\n                className=\"dashboard__input\" \r\n                id=\"imageUrl\" \r\n                type=\"file\" \r\n                name=\"imageUrl\" \r\n                onChange={handleFileChange} \r\n                required\r\n                hidden\r\n              />\r\n              <span className=\"dashboard__filename\">{fileName ? fileName : \"Aucun fichier choisi!\" }</span>\r\n\r\n              <input className=\"dashboard__button\" type=\"submit\" value=\"Valider\"/>\r\n            </form>\r\n            }      \r\n            {loading && \r\n              <LoadingSpinner />  \r\n            }\r\n          </div>  \r\n        }\r\n      </div>\r\n    </main>\r\n  )\r\n};\r\n\r\nexport default AdminDashboard;","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\context\\auth-context.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\404\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\loading\\index.js",[],{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","replacedBy":"66"},{"ruleId":"63","replacedBy":"67"},{"ruleId":"65","replacedBy":"68"},{"ruleId":"63","replacedBy":"69"},{"ruleId":"65","replacedBy":"70"},{"ruleId":"63","replacedBy":"71"},{"ruleId":"65","replacedBy":"72"},{"ruleId":"73","severity":1,"message":"74","line":58,"column":44,"nodeType":"75","messageId":"76","endLine":58,"endColumn":45,"suggestions":"77"},{"ruleId":"73","severity":1,"message":"78","line":58,"column":57,"nodeType":"75","messageId":"76","endLine":58,"endColumn":58,"suggestions":"79"},{"ruleId":"73","severity":1,"message":"80","line":58,"column":61,"nodeType":"75","messageId":"76","endLine":58,"endColumn":62,"suggestions":"81"},{"ruleId":"73","severity":1,"message":"82","line":58,"column":63,"nodeType":"75","messageId":"76","endLine":58,"endColumn":64,"suggestions":"83"},"no-native-reassign",["84"],"no-negated-in-lhs",["85"],["84"],["85"],["84"],["85"],["84"],["85"],"no-useless-escape","Unnecessary escape character: \\/.","Literal","unnecessaryEscape",["86","87"],"Unnecessary escape character: \\..",["88","89"],"Unnecessary escape character: \\(.",["90","91"],"Unnecessary escape character: \\).",["92","93"],"no-global-assign","no-unsafe-negation",{"messageId":"94","fix":"95","desc":"96"},{"messageId":"97","fix":"98","desc":"99"},{"messageId":"94","fix":"100","desc":"96"},{"messageId":"97","fix":"101","desc":"99"},{"messageId":"94","fix":"102","desc":"96"},{"messageId":"97","fix":"103","desc":"99"},{"messageId":"94","fix":"104","desc":"96"},{"messageId":"97","fix":"105","desc":"99"},"removeEscape",{"range":"106","text":"107"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"108","text":"109"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"110","text":"107"},{"range":"111","text":"109"},{"range":"112","text":"107"},{"range":"113","text":"109"},{"range":"114","text":"107"},{"range":"115","text":"109"},[1920,1921],"",[1920,1920],"\\",[1933,1934],[1933,1933],[1937,1938],[1937,1937],[1939,1940],[1939,1939]]