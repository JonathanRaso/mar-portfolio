[{"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\App.js":"1","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\index.js":"2","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home\\index.js":"3","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\infos\\index.js":"4","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\navbar\\index.js":"5","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\project\\index.js":"6","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home-card\\index.js":"7","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\admin\\admin-dashboard\\index.js":"8","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\context\\auth-context.js":"9","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\404\\index.js":"10","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\loading\\index.js":"11"},{"size":1495,"mtime":1612446048090,"results":"12","hashOfConfig":"13"},{"size":309,"mtime":1610717898127,"results":"14","hashOfConfig":"13"},{"size":1825,"mtime":1612801952201,"results":"15","hashOfConfig":"13"},{"size":3041,"mtime":1612868153750,"results":"16","hashOfConfig":"13"},{"size":627,"mtime":1612363650424,"results":"17","hashOfConfig":"13"},{"size":7051,"mtime":1612776171813,"results":"18","hashOfConfig":"13"},{"size":959,"mtime":1612859141011,"results":"19","hashOfConfig":"13"},{"size":6251,"mtime":1612774034695,"results":"20","hashOfConfig":"13"},{"size":90,"mtime":1611846263896,"results":"21","hashOfConfig":"13"},{"size":200,"mtime":1612536222678,"results":"22","hashOfConfig":"13"},{"size":160,"mtime":1612533086906,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1277rcr",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\App.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\index.js",[],["48","49"],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\infos\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\navbar\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\project\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\home-card\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\admin\\admin-dashboard\\index.js",["50","51","52","53"],"import { useState, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport { AuthContext } from '../../context/auth-context';\r\n\r\nimport LoadingSpinner from '../../shared/loading/index';\r\n\r\nimport '../../../App.css';\r\nimport './styles.css';\r\n\r\nconst AdminDashboard = () => {\r\n\r\n  const { login, setLogin } = useContext(AuthContext);\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Login form state\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  // Create form state\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [imageFile, setImageFile] = useState();\r\n\r\n  // Display file name before form submit\r\n  const [fileName, setFileName] = useState(\"\");\r\n\r\n  // TODO ==> add to context\r\n  // Display error/success message\r\n  const [creationResult, setCreationResult] = useState(\"\");\r\n  \r\n  const handleSubmitLoginForm = (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);  \r\n    /* TODO ==> Replace .then.catch with async try and catch */\r\n    axios.post(\"http://localhost:5000/api/users/login\", { username, password })\r\n    .then(function (response) {\r\n      setLogin(true);\r\n      setLoading(false);\r\n      setCreationResult(\"\");\r\n    })\r\n    .catch(function (error) {\r\n      setLoading(false);\r\n      setCreationResult(\"La connexion a échoué, veuillez recommencer.\");\r\n    });  \r\n  }\r\n\r\n  const handleFileChange = (event) => {\r\n    setImageFile(event.target.files[0]);\r\n    setFileName(event.target.value.match(/[\\/\\\\]([\\w\\d\\s\\.\\-\\(\\)]+)$/)[1]);\r\n  }\r\n\r\n  const handleSubmitCreateForm = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('title', title);\r\n      formData.append('description', description);\r\n      formData.append('imageUrl', imageFile);\r\n      const response = await axios.post(\"http://localhost:5000/api/projects/add-project\", formData );\r\n      /* TODO ==> Remove console.log(response) */\r\n      console.log(response);\r\n      console.log(response.status);\r\n      console.log(response.data.message);\r\n      setLoading(false);\r\n      setCreationResult(\"Création du projet réussie! Redirection en cours.\");\r\n\r\n      setTimeout(() => {\r\n        setCreationResult(\"\");\r\n        history.push('/');\r\n      }, 3500);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n      console.log(error.message);\r\n      setLoading(false);\r\n      setCreationResult(\"La création du projet a échoué, veuillez recommencer.\");\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <main> \r\n      <div className=\"admin__container\">\r\n        {creationResult &&\r\n          <span className=\"dashboard__message\">{creationResult}</span>\r\n        }\r\n        {!login &&\r\n          <div className=\"dashboard__form\">\r\n            {!loading && \r\n              <form className=\"dashboard__login\" onSubmit={handleSubmitLoginForm} method=\"POST\">\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"username\">Nom d'utilisateur</label>\r\n              <input \r\n                className=\"dashboard__input\"\r\n                id=\"username\" \r\n                type=\"text\" \r\n                name=\"username\" \r\n                value={username} \r\n                onChange={(event) => {\r\n                  setUsername(event.target.value);\r\n                }} \r\n                required/>\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"password\">Mot de passe</label>\r\n              <input \r\n                className=\"dashboard__input\"\r\n                id=\"password\" \r\n                type=\"password\" \r\n                name=\"password\" \r\n                value={password} \r\n                onChange={(event) => {\r\n                  setPassword(event.target.value);\r\n                }} \r\n                required/>\r\n\r\n              <input className=\"dashboard__button\" type=\"submit\" value=\"Connexion\"/>\r\n            </form>\r\n            }  \r\n            {loading && \r\n              <LoadingSpinner />  \r\n            }\r\n          </div>\r\n        }\r\n        \r\n        {login && \r\n          <div className=\"dashboard__form\">  \r\n            {!loading && \r\n              <form className=\"dashboard__creation\" onSubmit={handleSubmitCreateForm} method=\"POST\" encType=\"multipart/form-data\">\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"title\">Titre du projet</label>\r\n              <input \r\n                className=\"dashboard__input\"\r\n                id=\"title\" \r\n                type=\"text\" \r\n                name=\"title\"\r\n                placeholder=\"3 caractères min\" \r\n                value={title} \r\n                onChange={(event) => {\r\n                  setTitle(event.target.value); console.log('title is : ' + title);\r\n                }}\r\n                required\r\n              />\r\n\r\n              <label className=\"dashboard__label\" htmlFor=\"description\">Description du projet</label>\r\n              <textarea\r\n                className=\"dashboard__textarea\" \r\n                id=\"description\" \r\n                name=\"description\"\r\n                placeholder=\"15 caractères min\" \r\n                value={description} \r\n                onChange={(event) => {\r\n                  setDescription(event.target.value); console.log('description is : ' + description);\r\n                }} \r\n                required\r\n              />\r\n\r\n              <label className=\"dashboard__label--file\" htmlFor=\"imageUrl\">Choisir une image</label>\r\n              <input\r\n                className=\"dashboard__input\" \r\n                id=\"imageUrl\" \r\n                type=\"file\" \r\n                name=\"imageUrl\" \r\n                onChange={handleFileChange} \r\n                required\r\n                hidden\r\n              />\r\n              <span className=\"dashboard__filename\">{fileName ? fileName : \"Aucun fichier choisi!\" }</span>\r\n\r\n              <input className=\"dashboard__button\" type=\"submit\" value=\"Valider\"/>\r\n            </form>\r\n            }      \r\n            {loading && \r\n              <LoadingSpinner />  \r\n            }\r\n          </div>  \r\n        }\r\n      </div>\r\n    </main>\r\n  )\r\n};\r\n\r\nexport default AdminDashboard;","D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\context\\auth-context.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\404\\index.js",[],"D:\\MAR-Portfolio\\mar-portfolio\\client\\src\\components\\shared\\loading\\index.js",[],{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","severity":1,"message":"59","line":54,"column":44,"nodeType":"60","messageId":"61","endLine":54,"endColumn":45,"suggestions":"62"},{"ruleId":"58","severity":1,"message":"63","line":54,"column":57,"nodeType":"60","messageId":"61","endLine":54,"endColumn":58,"suggestions":"64"},{"ruleId":"58","severity":1,"message":"65","line":54,"column":61,"nodeType":"60","messageId":"61","endLine":54,"endColumn":62,"suggestions":"66"},{"ruleId":"58","severity":1,"message":"67","line":54,"column":63,"nodeType":"60","messageId":"61","endLine":54,"endColumn":64,"suggestions":"68"},"no-native-reassign",["69"],"no-negated-in-lhs",["70"],"no-useless-escape","Unnecessary escape character: \\/.","Literal","unnecessaryEscape",["71","72"],"Unnecessary escape character: \\..",["73","74"],"Unnecessary escape character: \\(.",["75","76"],"Unnecessary escape character: \\).",["77","78"],"no-global-assign","no-unsafe-negation",{"messageId":"79","fix":"80","desc":"81"},{"messageId":"82","fix":"83","desc":"84"},{"messageId":"79","fix":"85","desc":"81"},{"messageId":"82","fix":"86","desc":"84"},{"messageId":"79","fix":"87","desc":"81"},{"messageId":"82","fix":"88","desc":"84"},{"messageId":"79","fix":"89","desc":"81"},{"messageId":"82","fix":"90","desc":"84"},"removeEscape",{"range":"91","text":"92"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"93","text":"94"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"95","text":"92"},{"range":"96","text":"94"},{"range":"97","text":"92"},{"range":"98","text":"94"},{"range":"99","text":"92"},{"range":"100","text":"94"},[1641,1642],"",[1641,1641],"\\",[1654,1655],[1654,1654],[1658,1659],[1658,1658],[1660,1661],[1660,1660]]